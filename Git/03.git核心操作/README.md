### 本地仓库初始化

* 命令：git init
* 注意：**.git**文件夹中存放git工作所需要的信息，不能删除和随意更改该文件夹



### 本地仓库状态查看

* 命令：git status



### 将文件添加到暂存区

* 命令：git add [filename]



### 将文件由暂存区添加到版本库

* 命令：git commit -m "信息" [filename]



### 将更改后的文件直接添加到版本库

* 命令：git commit -m "信息" -a
* 注意：必须是之前已经在版本库中的文件才能使用



### 版本快照与索引值

- git的版本管理是通过记录文件操作来从而记录版本，每一次提交都会记录与上一个版本相比不同的文件操作
- 即每个版本都会保存一份文件操作的数据，这像是对数据照相了个相一样，称为快照
- 每个快照都有唯一值标识它，这个唯一值称为索引号
- git中有个 HEAD 指针指向某个索引号，表示当前工作区中是哪一个快照(版本)
- 示意图



### 提交历史查看

| 命令                     | 特点                                     | 能否看见【未来】                           |
| ------------------------ | ---------------------------------------- | ------------------------------------------ |
| git log                  | 最详细，内容最多                         | 只能看到过去的记录，看不到【未来】的记录   |
| git log --pretty=oneline | 简略版，索引号完整                       | 只能看到过去的记录，看不到【未来】的记录   |
| git log --oneline        | 简略版，索引号只有开头                   | 只能看到过去的记录，看不到【未来】的记录   |
| git reflog               | 简略版，索引号只有开头，附带版本移动步数 | 既能看到过去的记录，又能看到【未来】的记录 |

- 【未来】的含义
  - 【未来】不是指实际物理时间的未来，而是指当前版本的未来
  - 比如现在有版本A->B->C，A最老，C最新，现在由版本C切换为B
  - 则命令1，2，3都只能看到记录A和B，看不到C
  - 而命令4能看到记录A，B，C



### 版本切换

- 三种版本切换方法

  - 索引号：git reset --hard|mixed|soft 索引号
  - HEAD^：git reset --hard|mixed|soft HEAD^
  - HEAD~：git reset --hard|mixed|soft HEAD~n

- 索引号使用

  - 首先通过提交历史命令查看快照对应的索引号
  - 再通过 git reset --hard|mixed|soft 索引号即可切换版本

- HEAD^使用

  - HEAD^只能回到以前的版本，一个^表示回退一个版本
  - git reset --hard|mixed|soft HEAD^：回退1个版本
  - git reset --hard|mixed|soft HEAD^^^：回退3个版本 

- HEAD~使用

  - HEAD~只能回到以前的版本，n表示回退n个版本
  - git reset --hard|mixed|soft HEAD~1：回退1个版本
  - git reset --hard|mixed|soft HEAD~3：回退3个版本

- hard|mixed|soft的说明

  - --soft：工作区移动，暂存区，版本库不移动

    图图图

  - --mixed：工作区，暂存区移动，版本库不移动

    图图图

  - --hard：工作区，暂存区，版本库都移动

    图图图



### 文件删除与恢复

- 文件还没提交到暂存区和版本库，想删除
  - 直接删除，不涉及任何git操作
- 文件还没提交到暂存区和版本库，删除后想恢复
  - 没门，因为根本没用到git管理
- 文件已经提交到暂存区，想删除
  - git rm --cached [filename]
- 文件已经提交到暂存区，删除后想恢复
  - 工作区还存在文件：再git add一次就好
  - 工作区不存在文件：没门，因为相当于没用git管理
- 文件已经提交到版本库，想删除
  - git rm [filename]
  - git commit -m "信息" [filename]
- 文件已经提交到版本库，删除后想恢复
  - 使用 git reflog 查看【未来】版本的索引号
  - 使用 git reset --hard 索引号 回到【未来】版本



### 文件对比

- git diff [filename]：将工作区与暂存区进行对比
- git diff \[版本索引号]  [filename]：将工作区文件与对应版本文件进行对比
- 不带 [filename] 时，比较全部文件

